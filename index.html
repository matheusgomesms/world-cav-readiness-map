<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-g">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CAV Readiness Map</title>
    
    <!-- MapLibre GL JS CSS -->
    <link href="https://unpkg.com/maplibre-gl@4.3.2/dist/maplibre-gl.css" rel="stylesheet" />
    <!-- Your Custom CSS -->
    <link href="style.css" rel="stylesheet" />
</head>
<body>

    <header class="header">
        <h1>CAV Readiness Map</h1>
        <select id="city-selector">
            <option value="">-- Select a City --</option>
        </select>
        <!-- ADD THIS BUTTON -->
        <button id="metrics-toggle">Metrics</button>
</header>

<div id="legend">
    <h4>Cluster Legend</h4>
    <div><span class="legend-key" style="background-color: #1a9641;"></span>A: Complex Signed and Moderately Signaled Nodes</div>
    <div><span class="legend-key" style="background-color: #a6d96a;"></span>B: Signalized Secondary Corridors </div>
    <div><span class="legend-key" style="background-color: #fdae61;"></span>C: Residential with Pedestrian Awareness </div>
    <div><span class="legend-key" style="background-color: #d7191c;"></span>D: Minimal Road Infrastructure, Baseline Residential </div>
    <div><span class="legend-key" style="background-color: #cccccc;"></span>Other</div>
</div>

<div id="map"></div>

<aside id="metrics-panel">
    <button id="metrics-close-btn">Ã—</button>
    
    <h3 id="metrics-city-name">City Name</h3>

    <div class="metric-group">
        <h4>CLUSTER DISTRIBUTION</h4>
        <div id="bar-chart-container">
            <!-- The bar chart items will be generated by JavaScript -->
        </div>
    </div>

    <div class="metric-group">
        <h4>CITY INCOME LEVEL</h4>
        <p id="income-level-value">N/A</p>
    </div>
</aside>

<!-- MapLibre GL JS -->
<script src="https://unpkg.com/maplibre-gl@4.3.2/dist/maplibre-gl.js"></script>
<!-- PMTiles Protocol Adapter for MapLibre -->
<script src="https://unpkg.com/pmtiles@3.1.0/dist/pmtiles.js"></script>
<!-- Your Custom JavaScript -->
<script src="script.js"></script>
</body>
</html>